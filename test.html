<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>YouTube Channel ID Test</title>
</head>
<body>
    <button id="btn">チャンネルID取得（エラーになります）</button>
    <div id="result"></div>

    <script>
        document.getElementById('btn').onclick = async () => {
            const videoId = "dQw4w9WgXcQ";
            const videoUrl = `https://www.youtube.com/watch?v=${videoId}`;
            
            try {
                // ここでCORSエラーが発生します
                const res = await fetch(videoUrl);
                const html = await res.text();
                const match = html.match(/"channelId":"(UC[0-9A-Za-z_-]{22})"/);
                document.getElementById('result').innerText = match ? match[1] : "見つかりません";
            } catch (e) {
                document.getElementById('result').innerText = "エラー: " + e.message + " (コンソールを確認してください)";
                console.error("CORS制限により、ブラウザから直接YouTubeをfetchすることはできません:", e);
            }
        };
    </script>
</body>
</html>